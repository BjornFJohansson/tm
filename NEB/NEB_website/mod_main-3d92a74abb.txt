!function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;
if(!s&&u)return u(a,!0);
if(o)return o(a,!0);
var l=new Error("Cannot find module '"+a+"'");
throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};
t[a][0].call(c.exports,(function(e){return i(t[a][1][e]||e)}),c,c.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;
a<r.length;
a++)i(r[a]);
return i}({1:[function(e,t,n){"use strict";
t.exports=function(e,t){e.html5Mode(!1),e.hashPrefix("!"),t.debugInfoEnabled(!1)}},{}],2:[function(e,t,n){"use strict";
e("jquery");
var r=e("angular");
e("angular-route"),e("angular-sanitize"),e("angular-animate"),e("angular-ui-bootstrap");
window._=e("underscore"),r.module("underscore",[]).factory("_",["$window",function(e){return e._}]);
var i=r.module("tmcApp",["ngRoute","ngSanitize","ui.bootstrap","underscore","ngAnimate"]);
e("./services"),e("./controllers"),e("./directives"),i.config(["$routeProvider",e("./app.route")]),i.config(["$locationProvider","$compileProvider",e("./app.config")]),i.run(["$rootScope","$uibModal","modalService",e("./app.run")])},{"./app.config":1,"./app.route":3,"./app.run":4,"./controllers":7,"./directives":11,"./services":18,angular:32,"angular-animate":24,"angular-route":26,"angular-sanitize":28,"angular-ui-bootstrap":30,jquery:33,underscore:34}],3:[function(e,t,n){"use strict";
t.exports=function(e){e.when("/",{redirectTo:"/main"}).when("/main",{templateUrl:"views/main-b768bd1c14.html",controller:"MainCtrl",resolve:{prodData:["tmData",function(e){return e.getData("data/tmcalculatordata.json")}]}}).when("/batch",{templateUrl:"views/batch-fe85a81f13.html",controller:"BatchCtrl",resolve:{prodData:["tmData",function(e){return e.getData("data/tmcalculatordata.json")}]}}).when("/testbs",{templateUrl:"views/testbs.html",controller:"TestbsCtrl"}).when("/about",{templateUrl:"views/about-f46b5427a5.html",controller:"AboutCtrl"}).when("/help",{templateUrl:"views/help-8ae8e24615.html",controller:"AboutCtrl"}).when("/history",{templateUrl:"views/history-56a6a55424.html",controller:"AboutCtrl"}).when("/:p1seq/:p2seq",{templateUrl:"views/main-b768bd1c14.html",controller:"MainCtrl",resolve:{prodData:["tmData",function(e){return e.getData("data/tmcalculatordata.json")}]}}).when("/:p1seq",{templateUrl:"views/main-b768bd1c14.html",controller:"MainCtrl",resolve:{prodData:["tmData",function(e){return e.getData("data/tmcalculatordata.json")}]}}).otherwise({redirectTo:"/"})}},{}],4:[function(e,t,n){"use strict";
var r=e("jquery");
t.exports=function(e,t,n){r.event.addProp("dataTransfer"),e.appVersion="1.16.5",e.state={},e.state.input={},e.state.result={},e.state.results1=[],e.state.results2=[],e.state.input.p1="",e.state.input.p2="",e.state.input.ct=.25,e.state.input.groupKeys=[],e.state.input.products={},e.state.input.prodKeys=[],e.state.input.group="",e.state.input.product="",e.state.result.tm1="---",e.state.result.tm2="---",e.state.result.len1="---",e.state.result.len2="---",e.state.result.gc1="---",e.state.result.gc2="---",e.state.result.ta="---",e.state.result.itemlist=[],e.state.result.critlist=[],e.state.p1status="",e.state.p2status="",e.state.results1.showexpanded1=!1,e.state.results2.showexpanded1=!1;
var i=window,o=document,a=o.documentElement,s=o.getElementsByTagName("body")[0],u=i.innerWidth||a.clientWidth||s.clientWidth;
i.innerHeight||a.clientHeight||s.clientHeight;
e.initScreenWidth=u,e.screenMessage=!1,e.openmodal=function(e,n){var r={templateUrl:"views/modals/"+e+".html",size:n};
return t.open(r,{})},e.$watch((function(){return MathJax.Hub.Queue(["Typeset",MathJax.Hub]),!0}))}},{jquery:33}],5:[function(e,t,n){"use strict";
e("angular");
t.exports=function(e){}},{angular:32}],6:[function(e,t,n){"use strict";
e("angular");
var r=e("../vendorlibs/FileSaver");
t.exports=function(e,t,n,i,o,a,s,u,l){e.input={},e.result={},e.output=[],e.input.p1="",e.input.p2="",e.input.id1="",e.input.id2="",e.input.ct=.25,e.result.tm1="",e.result.tm2="",e.result.ta="",e.result.itemlist=[],e.result.critlist=[],e.input.groupKeys=[],e.input.products={},e.input.prodKeys=[],e.input.group="",e.input.product="",e.input.batch="",e.input.interleaved=!1,e.input.filename="",e.result.batch="",e.result.batch2="",e.p1status="",e.p2status="",console.log(n),i.setData(n),console.log(i.tmcdata),i.restoreUserPrefs()?(e.lastp1=i.restoreUserPrefs().p1,e.lastp2=i.restoreUserPrefs().p2):(e.lastp1="",e.lastp2="");
var c=s.p1seq||e.lastp1||"",d=s.p2seq||e.lastp2||"";
e.prefill=function(){e.input.interleaved?e.input.batch="P1fwd;
 AGCGGATAACAATTTCACACAGGA\nP1rev;
 GTAAAACGACGGCCAGT\nP3fwd;
 AGCGGATAAGGGCAATTTCAC\nP3rev;
 GTAAAACGACGGCCA\n":e.input.batch="P1fwd;
 AGCGGATAACAATTTCACACAGGA;
 P1rev;
 GTAAAACGACGGCCAGT\npBeta;
 AGCGGATAACAATTTCAC\nP3fwd;
 AGCGGATAAGGGCAATTTCAC;
 P3rev;
 GTAAAACGACGGCCA\n",e.output.showresultstable=!1,e.data_toggle_label=e.output.showresultstable?"Hide":"Show",e.runCalc3(e.input.interleaved)},e.clearCalc=function(){e.input.batch="",e.input.filename="",e.output=[],e.result.itemlist=[],e.result.critlist=[],e.result.batch="",e.result.batch2="",e.runmsg="",document.getElementById("fileinput").value="",e.output.showresultstable=!1,e.data_toggle_label=e.output.showresultstable?"Hide":"Show"},e.setGroups=function(){e.input.groupKeys=i.getGroupKeys(),e.input.group=e.input.groupKeys[0]},e.setProducts=function(){e.input.group;
e.input.productKeys=i.getProductKeysForGroup(e.input.group),e.input.products=i.getProductsForGroup(e.input.group),e.input.product=e.input.products[0].id;
e.input.product;
e.setCt()},e.setCt=function(){var t=e.input.group,n=e.input.product;
0===t.indexOf("Phusion")||0===t.indexOf("Q5")?e.input.ct=500:0===t.indexOf("LongAmp")?e.input.ct=400:0===t.indexOf("Master")?0===n.indexOf("phusion")||0===n.indexOf("q5")?e.input.ct=500:0===n.indexOf("lataq")||0===n.indexOf("lahstaq")?e.input.ct=400:e.input.ct=200:e.input.ct=200,e.runCalc3(e.input.interleaved)},e.runCalc3=function(t){t=!!t,console.log("Interleaved",t);
for(var n,r,s,u,l,c,d,p,f,h,g,m,v,$,b,y,w,x,C,S="",A="",T="",k="",D="",M=e.input.ct/1e3,E=e.input.product,O=e.input.group,N=[],P=[],q=0,I=null,L=1,R=e.input.batch,j=R.split(/\n\r?/),_=0;
_<j.length;
++_)j[_].match(/^\s*$/)?j.splice(_,1):j[_]=j[_].replace(/[;
,\t\s]$/,"");
if(j&&0!==j.length){console.log("after cleanup");
for(var V=j[0].slice(),U=V.split(""),H=0;
H<U.length;
++H)console.log(H,U[H],V.charCodeAt(H));
var F={};
if(console.log("testing separators"),F.semicolon=V.split(";
").length,console.log("fields when split with semicolon: ",F.semicolon),F.comma=V.split(",").length,console.log("fields when split with comma: ",F.comma),F.tab=V.split("\t").length,console.log("fields when split with tab: ",F.tab),F.ws=V.split(/[\s\W]+/).length,console.log("fields when split with ws: ",F.ws),t?(I=2===F.semicolon?";
":2===F.comma?",":2===F.tab?"\t":2===F.ws?/[\s\W]+/:null,L=2):(I=2===F.semicolon||3===F.semicolon||4===F.semicolon?";
":2===F.comma||3===F.comma||4===F.comma?",":2===F.tab||3===F.tab||4===F.tab?"\t":2===F.ws||3===F.ws||4===F.ws?/[\s\W]+/:null,L=1),null==I)return P=["Unable to read primers and/or invalid data format. "],e.result.critlist=P,e.result.itemlist=[],R="",e.input.filename="",document.getElementById("fileinput").value="",e.runmsg="",void(e.output=[]);
if(e.result={},e.output=[],e.ctstatus="",e.runmsg="",e.output.showresultstable=!1,e.data_toggle_label=e.output.showresultstable?"Hide":"Show",M<=0||isNaN(M/1))return!1,e.ctstatus="invalidct",P.push("Invalid primer concentration. "),e.result.itemlist=N,e.result.critlist=P,void(e.p1status="");
switch("onetaq_gc"===(s=i.getBufferIdForProduct(E))&&(q=5),u=i.getBufferSaltForProduct(e.input.product),O){case"Phusion":case"Phusion Hot Start Flex":l=5,M/=4;
break;
case"Master Mix":0===E.indexOf("phusion")?(l=5,M/=4):l=4;
break;
default:l=4}($=i.validateBuffer(E,O,s)).hasCritWarnings&&Array.prototype.push.apply(P,$.critwarnings),$.hasWarnings&&Array.prototype.push.apply(N,$.warnings),e.result.itemlist=N,e.result.critlist=P,o.setCt(M).setMonosalt(u).setMethod(l).setDMSO(q),d=0,p=0,g=0;
for(var B=0;
B<=j.length-L;
B+=L){if(D="OK",f=!1,h=!1,t){if(n=j[B].split(I),r=j[B+1].split(I),n.length<2&&r.length<2){++g;
continue}2===n.length?(S=n[1],T=n[0]):(S="",T=""),2===r.length?(A=r[1],k=r[0]):(A="",k="")}else if(4===(n=j[B].split(I)).length)S=n[1].replace(/[/W/s]/g,""),A=n[3].replace(/[/W/s]/g,""),T=n[0],k=n[2];
else if(3===n.length)S=n[1].replace(/[/W/s]/g,""),A=n[2].replace(/[/W/s]/g,""),T=n[0],k=n[0];
else{if(2!==n.length){++g;
continue}S=n[1].replace(/[/W/s]/g,""),A="",T=n[0],k=""}if(e.input.p1=S.toUpperCase(),e.input.p2=A.toUpperCase(),e.input.id1=T,e.input.id2=k,(m=i.validateInput(e.input.p1.replace(/\s/g,""),e.input.p2.replace(/\s/g,""),M,E,O)).p1isValid,m.p2isValid,c=m.hasCritWarnings,e.p1status=m.p1status,e.p2status=m.p2status,c&&(D=m.critwarnings.join("-- "),f=!0),"invalidseq"!==e.p1status){var G,W,z=a.expandDNASeq(S.replace(/\s/g,""));
if(1===z.length)y=(W=o.setCt(M).setMonosalt(u).setMethod(l).setDMSO(q).calcTm_nomm(S.replace(/\s/g,""))).tm,y=Math.round(Math.round(10*y)/10),e.result.tm1=y,e.result.len1=W.len,e.result.gc1=100*W.fgc,e.result.gc1=Math.round(10*e.result.gc1/10);
else{e.results1=[],o.setCt(M).setMonosalt(u).setMethod(l).setDMSO(q);
for(var Y=0;
Y<z.length;
++Y)G=z[Y],W=o.calcTm_nomm(G),y=Math.round(Math.round(10*W.tm)/10),e.results1.push({seq:G,tm:y,len:G.length,gc:Math.round(100*W.fgc*10/10)});
y=e.results1.reduce((function(e,t){return t.tm<e&&(e=t.tm),e}),e.results1[0].tm),x=e.results1.reduce((function(e,t){return t.tm>e&&(e=t.tm),e}),e.results1[0].tm),e.result.tm1=y!==x?y+" - "+x:y,e.result.len1=S.replace(/\s/g,"").length,e.result.gc1="---",e.result.tm1m=x}}if("invalidseq"!==e.p2status){var K,Q,X=a.expandDNASeq(A.replace(/\s/g,""));
if(1===X.length)w=(Q=o.setCt(M).setMonosalt(u).setMethod(l).setDMSO(q).calcTm_nomm(A.replace(/\s/g,""))).tm,w=Math.round(Math.round(10*w)/10),e.result.tm2=w,e.result.len2=Q.len,e.result.gc2=100*Q.fgc,e.result.gc2=Math.round(10*e.result.gc2/10);
else{e.results2=[],o.setCt(M).setMonosalt(u).setMethod(l).setDMSO(q);
for(var J=0;
J<z.length;
++J)K=X[J],Q=o.calcTm_nomm(K),w=Math.round(Math.round(10*Q.tm)/10),e.results2.push({seq:K,tm:w,len:K.length,gc:Math.round(100*Q.fgc*10/10)});
w=e.results2.reduce((function(e,t){return t.tm<e&&(e=t.tm),e}),e.results2[0].tm),C=e.results2.reduce((function(e,t){return t.tm>e&&(e=t.tm),e}),e.results2[0].tm),e.result.tm2=w!==C?w+" - "+C:w,e.result.len2=A.replace(/\s/g,"").length,e.result.gc2="---",e.result.tm2m=C}}"invalidseq"!==e.p1status&&"invalidseq"!==e.p2status?(b=i.getAnnealTemp(S,y,A,w,O,E),e.result.ta=Math.round(b),(v=i.validateTm(y,w,b,E,O,s)).hasCritWarnings&&(h=!0,D+="--"+v.critwarnings.join("--")),v.hasWarnings&&(h=!0,D+="-- "+v.warnings.join("-- "))):e.result.ta="---",f&&(d+=1),h&&(p+=1),"invalidseq"!==e.p1status&&e.output.push([e.input.id1,e.input.p1,e.result.tm1,e.result.ta,D].join("\t")),"invalidseq"!==e.p2status&&e.output.push([e.input.id2,e.input.p2,e.result.tm2,e.result.ta,D].join("\t")),e.p1status=""}e.output.length,e.runmsg=g>0?g+" Invalid line(s) ":"",e.runmsg+=e.output.length+" primers processed. Errors: "+d+" Warnings: "+p,e.result.batch=e.output.join("\n"),e.result.batch2=[];
for(var Z=0;
Z<e.output.length;
++Z)e.result.batch2.push(e.output[Z].split("\t"));
0==e.output.length&&j.length>0?e.novaliddatamsg="Unable to detect format or no valid data entered -- check format of 1st line.":e.novaliddatamsg=""}},e.getBatchResults=function(){return e.result.batch},e.downloadData=function(){var t=e.getBatchResults(),n=new Blob([t],{type:"text/plain;
charset=utf-8"});
r.saveAs(n,"tmcalc_batch.txt")};
e.$on("$routeChangeStart",(function(){})),e.about=function(){u.path("#/about")},e.safeApply=function(e){var t=this.$root.$$phase;
"$apply"==t||"$digest"==t?e&&"function"==typeof e&&e():this.$apply(e)},e.processFileData=function(t){e.safeApply((function(){e.input.batch=t,console.log("filedata:"+t),e.output.showresultstable=!1,e.data_toggle_label=e.output.showresultstable?"Hide":"Show",e.runCalc3(e.input.interleaved)}))},e.switch2single=function(){u.path("/")},e.toggle_data_display=function(){e.output.showresultstable=!e.output.showresultstable,e.data_toggle_label=e.output.showresultstable?"Hide":"Show"},e.output.showresultstable=!1,e.data_toggle_label=e.output.showresultstable?"Hide":"Show",e.input.p1=c,e.input.p2=d,e.setGroups(),e.setProducts()}},{"../vendorlibs/FileSaver":22,angular:32}],7:[function(e,t,n){"use strict";
var r=e("angular").module("tmcApp");
r.controller("MainCtrl",["$scope","$rootScope","nebutil","prodData","tmcalculatorData","tmcalc","neb_bioseq","$routeParams","$location","$window",e("./main")]),r.controller("BatchCtrl",["$scope","nebutil","prodData","tmcalculatorData","tmcalc","neb_bioseq","$routeParams","$location","$window",e("./batch")]),r.controller("AboutCtrl",["$scope",e("./about")])},{"./about":5,"./batch":6,"./main":8,angular:32}],8:[function(e,t,n){"use strict";
e("angular");
t.exports=function(e,t,n,r,i,o,a,s,u,l){e.input={},e.result={},e.results1=[],e.results2=[],e.input.p1="",e.input.p2="",e.input.ct=.25,e.result.tm1="---",e.result.tm2="---",e.result.len1="---",e.result.len2="---",e.result.gc1="---",e.result.gc2="---",e.result.ta="---",e.result.itemlist=[],e.result.critlist=[],e.input.groupKeys=[],e.input.products={},e.input.prodKeys=[],e.input.group="",e.input.product="",e.p1status="",e.p2status="",console.log(r),i.setData(r),console.log(i.tmcdata),i.restoreUserPrefs()?(e.lastp1=i.restoreUserPrefs().p1,e.lastp2=i.restoreUserPrefs().p2):(e.lastp1="",e.lastp2="");
var c=s.p1seq||e.lastp1||"";
s.p2seq||e.lastp2;
console.log("p1seq "+c),e.getUrl=function(e){var t=getPolForName(e),n=null;
return t&&(n=t.URL),console.log("URL "+n),n};
e.prefill=function(){console.log("prefill"),e.input.p1="AGCGGATAACAATTTCACACAGGA",e.input.p2="GTA AAA CGA CGG CCA GT",e.runCalc2()},e.clearCalc=function(){console.log("clearCalc"),e.input.p1="",e.input.p2="",e.result.tm1="---",e.result.tm2="---",e.result.len1="---",e.result.len2="---",e.result.gc1="---",e.result.gc2="---",e.result.ta="---",e.result.itemlist=[],e.result.critlist=[],e.results1=[],e.results2=[],e.p1status="",e.p2status="",e.showInfoMessage=!1},e.setGroups=function(){console.log("setGroups called"),e.input.groupKeys=i.getGroupKeys(),e.input.group=e.input.groupKeys[0]},e.setProducts=function(){var t;
console.log("setProducts called"),t=e.input.group,e.input.productKeys=i.getProductKeysForGroup(t),e.input.products=i.getProductsForGroup(t),e.input.product=e.input.products[0].id,e.input.product,e.setCt()},e.setCt=function(){console.log("setCt called");
var t=e.input.group,n=e.input.product;
0===t.indexOf("Phusion")||0===t.indexOf("Q5")?e.input.ct=500:0===t.indexOf("LongAmp")?e.input.ct=400:0===t.indexOf("Master")?0===n.indexOf("phusion")||0===n.indexOf("q5")?e.input.ct=500:0===n.indexOf("lataq")||0===n.indexOf("lahstaq")?e.input.ct=400:e.input.ct=200:e.input.ct=200,e.runCalc2()},e.runCalc2=function(){console.log("runCalc2");
var t,r,s,u,l,c,d,p,f,h,g=e.input.p1,m=e.input.p2,v=e.input.ct/1e3,$=e.input.product,b=e.input.group,y=n.isNumeric(v),w=[],x=[],C=0,S=n.isValidSeq(g,!1),A=n.isValidSeq(m,!1),T=i.validateInput(g.replace(/\s/g,""),m.replace(/\s/g,""),v,$,b);
if(y=T.ctisValid,S=T.p1isValid,A=T.p2isValid,T.hasCritWarnings,T.hasWarnings,x=T.critwarnings,w=T.warnings,e.p1status=T.p1status,e.p2status=T.p2status,e.result.itemlist=w,e.result.critlist=x,e.ctstatus="",e.results1=[],e.results2=[],e.results2.showexpanded2=!1,e.results1.showexpanded1=!1,e.expanded2_toggle_label=e.results2.showexpanded2?"Hide":"Show",e.expanded1_toggle_label=e.results1.showexpanded1?"Hide":"Show",!y)return e.result.ta="---",e.result.tm1=null,e.result.tm2=null,e.ctstatus="invalidct",S&&(e.p1status=""),void(A&&(e.p2status=""));
if(console.log("checkpoint 1"),console.log("p1 is: "+g),console.log("p2 is: "+m),console.log("p1 is valid: "+S),console.log("p2 is valid: "+A),console.log("p1status: "+e.p1status),console.log("p2status: "+e.p2status),"invalidseq"===e.p1status&&"invalidseq"===e.p2status)return e.result.tm1="---",e.result.tm2="---",e.result.len1="---",e.result.len2="---",e.result.gc1="---",e.result.gc2="---",e.result.ta="---",S&&0===g.length&&(e.p1status=""),A&&0===m.length&&(e.p2status=""),void console.log("checkpoint 1a");
switch("invalidseq"===e.p1status&&(e.result.tm1="---",e.result.len1="---",e.result.gc1="---",e.result.ta="---"),"invalidseq"===e.p2status&&(e.result.tm2="---",e.result.len2="---",e.result.gc2="---",e.result.ta="---"),console.log("checkpoint 2"),"onetaq_gc"===(t=i.getBufferIdForProduct($))&&(C=5),r=i.getBufferSaltForProduct(e.input.product),b){case"Phusion":case"Phusion Hot Start Flex":s=5,v/=4;
break;
case"Master Mix":0===$.indexOf("phusion")?(s=5,v/=4):s=4;
break;
default:s=4}if("invalidseq"!==e.p1status){var k,D=a.expandDNASeq(g.replace(/\s/g,""));
if(1===D.length)l=(f=o.setCt(v).setMonosalt(r).setMethod(s).setDMSO(C).calcTm_nomm(g.replace(/\s/g,""))).tm,l=Math.round(Math.round(10*l)/10),e.result.tm1=l,e.result.len1=f.len,e.result.gc1=100*f.fgc,e.result.gc1=Math.round(10*e.result.gc1/10);
else{e.results1=[],o.setCt(v).setMonosalt(r).setMethod(s).setDMSO(C);
for(var M=0;
M<D.length;
++M)k=D[M],f=o.calcTm_nomm(k),l=Math.round(Math.round(10*f.tm)/10),e.results1.push({seq:k,tm:l,len:k.length,gc:Math.round(100*f.fgc*10/10)});
l=e.results1.reduce((function(e,t){return t.tm<e&&(e=t.tm),e}),e.results1[0].tm),d=e.results1.reduce((function(e,t){return t.tm>e&&(e=t.tm),e}),e.results1[0].tm),e.result.tm1=l!==d?l+" - "+d:l,e.result.len1=g.replace(/\s/g,"").length,e.result.gc1="---",e.result.tm1m=d}}if("invalidseq"!==e.p2status){var E,O=a.expandDNASeq(m.replace(/\s/g,""));
if(1===O.length)c=(h=o.setCt(v).setMonosalt(r).setMethod(s).setDMSO(C).calcTm_nomm(m.replace(/\s/g,""))).tm,c=Math.round(Math.round(10*c)/10),e.result.tm2=c,e.result.len2=h.len,e.result.gc2=100*h.fgc,e.result.gc2=Math.round(10*e.result.gc2/10);
else{e.results2=[],o.setCt(v).setMonosalt(r).setMethod(s).setDMSO(C);
for(var N=0;
N<O.length;
++N)E=O[N],h=o.calcTm_nomm(E),c=Math.round(Math.round(10*h.tm)/10),e.results2.push({seq:E,tm:c,len:E.length,gc:Math.round(100*h.fgc*10/10)});
c=e.results2.reduce((function(e,t){return t.tm<e&&(e=t.tm),e}),e.results2[0].tm),p=e.results2.reduce((function(e,t){return t.tm>e&&(e=t.tm),e}),e.results2[0].tm),e.result.tm2=c!==p?c+" - "+p:c,e.result.len2=m.replace(/\s/g,"").length,e.result.gc2="---",e.result.tm2m=p}}if("invalidseq"!==e.p1status&&"invalidseq"!==e.p2status){u=i.getAnnealTemp(g,l,m,c,b,$),e.result.ta=Math.round(u),console.log("checkpoint 3");
var P=i.validateTm(l,c,u,$,b,t),q=i.validateBuffer($,b,t);
if(x=[],w=[],P.hasCritWarnings&&(x=P.critwarnings),P.hasWarnings&&(w=P.warnings),q.hasCritWarnings&&Array.prototype.push.apply(x,q.critwarnings),q.hasWarnings&&Array.prototype.push.apply(w,q.warnings),e.result.itemlist=w,e.result.critlist=x,e.result&&"---"===e.result.ta)e.showInfoMessage=!1;
else switch(b){case"Phusion":case"Phusion Hot Start Flex":case"Q5":case"Q5 Hot Start":case"Q5U Hot Start":case"Q5 Blood Direct":e.showInfoMessage=!0;
break;
case"Master Mix":0===$.indexOf("phusion")||0===$.indexOf("q5")?e.showInfoMessage=!0:e.showInfoMessage=!1;
break;
default:e.showInfoMessage=!1}console.log("exiting runCalc2 normally")}else e.result.ta="---"};
e.$on("$routeChangeStart",(function(){!function(){var n,r;
for(n in console.log("saveState"),t.state||(t.state={},t.state.input={},t.state.result={},t.state.results1=[],t.state.results2=[]),t.state.input||(t.state.input={}),t.state.result||(t.state.result={}),t.state.results1||(t.state.results1=[]),t.state.results2||(t.state.results2=[]),e.input)t.state.input[n]=e.input[n];
for(n in e.result)t.state.result[n]=e.result[n];
for(r in e.results1)t.state.results1[r]=e.results1[r];
for(r in e.results2)t.state.results2[r]=e.results2[r];
t.state.results1.showexpanded1=e.results1.showexpanded1,t.state.results2.showexpanded2=e.results2.showexpanded2,t.state.p1status=e.p1status="",t.state.p2status=e.p2status="",console.log(t.state)}()})),e.about=function(){u.path("#/about")},e.switch2batch=function(){u.path("/batch")};
!function(){var n,r;
for(n in console.log("loadState"),console.log(t.state),e.input||(e.input={}),e.result||(e.result={}),e.results1||(e.results1=[]),e.results2||(e.results2=[]),t.state.input)e.input[n]=t.state.input[n];
for(n in t.state.result)e.result[n]=t.state.result[n];
for(r in t.state.results1)e.results1[r]=t.state.results1[r];
for(r in t.state.results2)e.results2[r]=t.state.results2[r];
e.results1.showexpanded1=t.state.results1.showexpanded1,e.results2.showexpanded2=t.state.results2.showexpanded2,e.p1status=t.state.p1status,e.p2status=t.state.p2status,console.log(e.input),console.log(e.result)}(),0===e.input.groupKeys.length&&(e.setGroups(),e.input.group="Q5",e.input.productKeys=i.getProductKeysForGroup(e.input.group),e.input.products=i.getProductsForGroup(e.input.group),e.input.product=e.input.products[0].id,e.input.ct=500),t.initScreenWidth<640&&t.screenMessage&&(t.openmodal("screensize","sm"),t.screenMessage=!1),e.showInfoMessage=!1,e.infoMessageText="The annealing temperature for each polymerase is based on empirical observations of efficiency. The optimal annealing temperature for high fidelity hot start DNA polymerases like Q5 may differ significantly from that of Taq-based polymerases.",e.toggle_expanded2_display=function(){e.results2.showexpanded2=!e.results2.showexpanded2,e.expanded2_toggle_label=e.results2.showexpanded2?"Hide":"Show"},e.toggle_expanded1_display=function(){e.results1.showexpanded1=!e.results1.showexpanded1,e.expanded1_toggle_label=e.results1.showexpanded1?"Hide":"Show"},e.expanded2_toggle_label=e.results2.showexpanded2?"Hide":"Show",e.expanded1_toggle_label=e.results1.showexpanded1?"Hide":"Show"}},{angular:32}],9:[function(e,t,n){"use strict"},{}],10:[function(e,t,n){"use strict";
t.exports=function(){return{restrict:"A",replace:!0,scope:{processwith:"&"},template:'<div><div></div><input type="file" /></div>',link:function(e,t,n){var r=angular.element(t.children().eq(1)),i=function(t){var n=new FileReader;
n.onload=function(t){console.log("about to call processwith"),console.log(t.target.result),console.log(e.processwith),e.processwith({filedata:t.target.result}),console.log("after call to processwith")},n.readAsText((t.srcElement||t.target).files[0])};
r.on("dragover",(function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"})),r.on("drop",i),r.on("change",i)}}}},{}],11:[function(e,t,n){"use strict";
var r=e("angular").module("tmcApp");
r.directive("fileInputTest",[e("./fileInputTest")]),r.directive("fileinput",[e("./fileinput")]),r.directive("onReadFile",["$parse",e("./onReadFile")])},{"./fileInputTest":9,"./fileinput":10,"./onReadFile":12,angular:32}],12:[function(e,t,n){"use strict";
t.exports=function(e){return{restrict:"A",scope:!1,link:function(t,n,r){var i=e(r.onReadFile);
n.on("change",(function(e){var n=new FileReader;
n.onload=function(e){t.$apply((function(){i(t,{filedata:e.target.result})}))},n.readAsText((e.srcElement||e.target).files[0])}))}}}},{}],13:[function(e,t,n){"use strict";
var r,i,o={};
(i=o).isNumeric=function(e){return!isNaN(e/1)},i.trim=function(e){for(var t=(e=e.replace(/^\s+/,"")).length-1;
t>=0;
t--)if(/\S/.test(e.charAt(t))){e=e.slice(0,t+1);
break}return e},i.DEGENERATES={A:"A",C:"C",G:"G",T:"T",U:"U",W:"AT",S:"CG",M:"AC",K:"GT",R:"AG",Y:"CT",B:"CGT",D:"AGT",H:"ACT",V:"ACG",N:"ACGT",a:"a",c:"c",g:"g",t:"t",u:"u",w:"at",s:"cg",m:"ac",k:"gt",r:"ag",y:"ct",b:"cgt",d:"agt",h:"act",v:"acg",n:"acgt"},i.COMPLEMENTS=function(){var e,t="ACGTUNSWMKRYVDHBacgtunswmkryvdhb ",n={};
for(e=0;
e<t.length;
++e)n[t.charAt(e)]="TGCAANSWKMYRBHDVtgcaanswkmyrbhdv ".charAt(e);
return n}(),i.AMINO_ACID_TLC={ALA:"A",ASX:"B",CYS:"C",ASP:"D",GLU:"E",PHE:"F",GLY:"G",HIS:"H",ILE:"I",LYS:"K",LEU:"L",MET:"M",ASN:"N",PYL:"O",PRO:"P",GLN:"Q",ARG:"R",SER:"S",THR:"T",SEC:"U",VAL:"V",TRP:"W",XAA:"X",TYR:"Y",GLX:"Z",TER:"*",Ala:"A",Asx:"B",Cys:"C",Asp:"D",Glu:"E",Phe:"F",Gly:"G",His:"H",Ile:"I",Lys:"K",Leu:"L",Met:"M",Asn:"N",Pyl:"O",Pro:"P",Gln:"Q",Arg:"R",Ser:"S",Thr:"T",Sec:"U",Val:"V",Trp:"W",Xaa:"X",Tyr:"Y",Glx:"Z",Ter:"*"},i.AMINO_ACID_OLC={A:"Ala",B:"Asx",C:"Cys",D:"Asp",E:"Glu",F:"Phe",G:"Gly",H:"His",I:"Ile",K:"Lys",L:"Leu",M:"Met",N:"Asn",O:"Pyl",P:"Pro",Q:"Gln",R:"Arg",S:"Ser",T:"Thr",U:"Sec",V:"Val",W:"Trp",X:"Xaa",Y:"Tyr",Z:"Glx","*":"Ter"},i.validAARegex=/([ABCDEFGHIKLMNOPQRSTUVWXYZ\*])/gi,i.invalidAARegex=/([^ABCDEFGHIKLMNOPQRSTUVWXYZ\*])/gi,i.validNARegex=/([ACGTUNSWMKRYVDHBacgtunswmkryvdhb])/g,i.invalidNARegex=/([^ACGTUNSWMKRYVDHBacgtunswmkryvdhb])/g,i.validNAStrictRegex=/([TCAGtcag])/g,i.invalidNAStrictRegex=/([^TCAGtcag])/g,i.isValidAASeq=function(e){return!i.invalidAARegex.exec(e)},i.isValidNASeq=function(e,t){return!((t=t||!1)?i.invalidNARegex:i.invalidNAStrictRegex).exec(e)},i.aaOneToThree=function(e){for(var t=e.split(""),n=[],r=0;
r<t.length;
r++){if(!i.AMINO_ACID_OLC[t[r]])throw"Unknown one-letter-code: "+t[r];
n.push(i.AMINO_ACID_OLC[t[r]])}return n.join("")},i.CODONS=function(){var e,t,n,r,i,o,a=[],s=["T","C","A","G"];
for(r=0;
r<4;
++r)for(e=s[r],i=0;
i<4;
++i)for(t=s[i],o=0;
o<4;
++o)n=s[o],a.push(e+t+n);
return a}(),i.CODON_TABLE_DATA=["1\nFFLLSSSSYY**CC*WLLLLPPPPHHQQRRRRIIIMTTTTNNKKSSRRVVVVAAAADDEEGGGG\n---M---------------M---------------M----------------------------","2\nFFLLSSSSYY**CCWWLLLLPPPPHHQQRRRRIIMMTTTTNNKKSS**VVVVAAAADDEEGGGG\n--------------------------------MMMM---------------M------------","3\nFFLLSSSSYY**CCWWTTTTPPPPHHQQRRRRIIMMTTTTNNKKSSRRVVVVAAAADDEEGGGG\n----------------------------------MM----------------------------","4\nFFLLSSSSYY**CCWWLLLLPPPPHHQQRRRRIIIMTTTTNNKKSSRRVVVVAAAADDEEGGGG\n--MM---------------M------------MMMM---------------M------------","5\nFFLLSSSSYY**CCWWLLLLPPPPHHQQRRRRIIMMTTTTNNKKSSSSVVVVAAAADDEEGGGG\n---M----------------------------MMMM---------------M------------","6\nFFLLSSSSYYQQCC*WLLLLPPPPHHQQRRRRIIIMTTTTNNKKSSRRVVVVAAAADDEEGGGG\n-----------------------------------M----------------------------","9\nFFLLSSSSYY**CCWWLLLLPPPPHHQQRRRRIIIMTTTTNNNKSSSSVVVVAAAADDEEGGGG\n-----------------------------------M---------------M------------","10\nFFLLSSSSYY**CC*WLLLLPPPPHHQQRRRRIIIMTTTTNNKKSSRRVVVVAAAADDEEGGGG\n---M---------------M------------MMMM---------------M------------","11\nFFLLSSSSYY**CC*WLLLLPPPPHHQQRRRRIIIMTTTTNNKKSSRRVVVVAAAADDEEGGGG\n---M---------------M------------MMMM---------------M------------","12\nFFLLSSSSYY**CC*WLLLSPPPPHHQQRRRRIIIMTTTTNNKKSSRRVVVVAAAADDEEGGGG\n-------------------M---------------M----------------------------","13\nFFLLSSSSYY**CCWWLLLLPPPPHHQQRRRRIIMMTTTTNNKKSSGGVVVVAAAADDEEGGGG\n---M------------------------------MM---------------M------------","14\nFFLLSSSSYYY*CCWWLLLLPPPPHHQQRRRRIIIMTTTTNNNKSSSSVVVVAAAADDEEGGGG\n-----------------------------------M----------------------------","15\nFFLLSSSSYY*QCC*WLLLLPPPPHHQQRRRRIIIMTTTTNNKKSSRRVVVVAAAADDEEGGGG\n-----------------------------------M----------------------------","16\nFFLLSSSSYY*LCC*WLLLLPPPPHHQQRRRRIIIMTTTTNNKKSSRRVVVVAAAADDEEGGGG\n-----------------------------------M----------------------------","21\nFFLLSSSSYY**CCWWLLLLPPPPHHQQRRRRIIMMTTTTNNNKSSSSVVVVAAAADDEEGGGG\n-----------------------------------M---------------M------------","22\nFFLLSS*SYY*LCC*WLLLLPPPPHHQQRRRRIIIMTTTTNNKKSSRRVVVVAAAADDEEGGGG\n-----------------------------------M----------------------------","23\nFF*LSSSSYY**CC*WLLLLPPPPHHQQRRRRIIIMTTTTNNKKSSRRVVVVAAAADDEEGGGG\n--------------------------------M--M---------------M------------","24\nFFLLSSSSYY**CCWWLLLLPPPPHHQQRRRRIIIMTTTTNNKKSSSKVVVVAAAADDEEGGGG\n---M---------------M---------------M---------------M------------","25\nFFLLSSSSYY**CCGWLLLLPPPPHHQQRRRRIIIMTTTTNNKKSSRRVVVVAAAADDEEGGGG\n---M-------------------------------M---------------M------------","90\nFFLLSSSSYY*QCC*WLLLLPPPPHHQQRRRRIIIMTTTTNNKKSSRRVVVVAAAADDEEGGGG\n---M---------------M------------MMMM---------------M------------"],i.sanitizeSeq=function(e){return e.replace(/[\s\d]+/gi,"")},i.revcomp=function(e,t){if(""===(e=e||""))return"";
"undefined"!==t&&null!==t||(t=!0);
for(var n=e.split(""),r=0;
r<n.length;
++r)if(i.COMPLEMENTS[n[r]])n[r]=i.COMPLEMENTS[n[r]];
else if(t)throw"Unknown base: "+n[r];
for(var o="",a=n.length-1;
a>=0;
a--)o+=n[a];
return o},i.rev=function(e){if(""===(e=e||""))return"";
for(var t=e.split(""),n="",r=t.length-1;
r>=0;
r--)n+=t[r];
return n},i.comp=function(e,t){if(""===(e=e||""))return"";
"undefined"!==t&&null!==t||(t=!0);
for(var n=e.split(""),r=0;
r<n.length;
++r)if(i.COMPLEMENTS[n[r]])n[r]=i.COMPLEMENTS[n[r]];
else if(t)throw"Unknown base: "+n[r];
return n.join("")},i.TranslationTable=function(e,t){this.self=this,this.codons=e,this.starts=t,this.translate=function(n,r){if(r=r||!1,3!==n.length)throw"Invalid codon: "+n;
var o=n.split("").map((function(e){return i.DEGENERATES[e].split("")})),a=function(){var e,t,n,r,i,a,s,u=[];
for(i=0;
i<o[0].length;
++i){for(r=[],e=o[0][i],a=0;
a<o[1].length;
++a)for(t=o[1][a],s=0;
s<o[2].length;
++s)n=o[2][s],r.push(e+t+n);
u.push(r)}return u}(),s=function(){for(var t=[],n=function(n){e[n]?t.push(e[n]):t.push("X")},r=0;
r<a.length;
r++)a[r].forEach(n);
return t}(),u=function(){for(var e=[],n=function(n){t[n]?e.push(t[n]):e.push(!1)},r=0;
r<a.length;
r++)a[r].forEach(n);
return e}();
return[1===s.length?s.pop():2===s.length?s.indexOf("D")+s.indexOf("N")===1?"B":s.indexOf("E")+s.indexOf("Q")===1?"Z":s.indexOf("I")+s.indexOf("L")===1?"J":s[0]===s[1]?s[0]:"X":"X",!(u.length>1)&&u.pop()]}},i.buildhash=function(e,t){var n={};
if(e.length!==t.length)throw"Arrays for buildhash must be equal length";
for(var r=0;
r<e.length;
r++)n[e[r].toString()]=t[r];
return n},i.CODON_TABLES=(r={},i.CODON_TABLE_DATA.forEach((function(e){var t=e.split("\n");
if(3!==t.length)throw"codon table not parsed properly";
var n=t[0],o=i.buildhash(i.CODONS,t[1].split("")),a=i.buildhash(i.CODONS,t[2].split("").map((function(e){return"M"===e})));
r[n]=new i.TranslationTable(o,a)})),r),i.translate=function(e,t,n,r,o){if(n=n||"1",t=t||0,r=r||[],o=o||[!0,!0],e=e.slice(t).toUpperCase().replace(/U/g,"T"),!i.CODON_TABLES[n])throw"Unknown translation table: "+n;
if(e.length<3)throw"Sequence length is too short.";
var a,s=i.CODON_TABLES[n],u=s.translate(e.slice(0,3),3===e.length),l=u[0],c=u[1];
a=!o[0]&&c?["M"]:o[0]||c||0!==t?[l]:["X"];
for(var d=e.length,p=3;
p<d-d%3;
p+=3)a.push(s.translate(e.slice(p,p+3),p===d-3)[0]);
return a=a.join(""),r.forEach((function(e){if(e[0]%3!=0)throw"Invalid modification coordinate: "+e[0];
var t=e[0]/3;
a=a.slice(0,t)+e[1]+a.slice(t)})),o[1]||"*"!==a[a.length-1]||(a=a.slice(0,a.length-1)),a},i.terminalOverlapLen=function(e,t,n,r){r=r||0;
var i,o=n=n||Math.min(e.length,t.length),a=function(t,n){for(var r=0,i=0;
i<e.length;
++i)t.charAt(i)!==n.charAt(i)&&++r;
return r};
for((e.length<n||t.length<n)&&(o=Math.min(e.length,t.length)),i=o;
i>0;
){if(a(e.slice(-i),t.slice(0,i))<=r)return i;
--i}return 0},i.lcs=function(e,t){if(!e||!t||0===e.length||0===t.length)return 0;
var n,r,i=0,o=0,a=new Array(e.length);
for(n=0;
n<=e.length;
n++)for(a[n]=new Array(t.length),r=0;
r<=t.length;
r++)a[n][r]=0;
for(var s=0,u=e.length;
s<u;
s++)for(var l=0,c=t.length;
l<c;
l++)e[s]===t[l]?(a[s+1][l+1]=0===s||0===l?1:a[s][l]+1,a[s+1][l+1]>i&&(i=a[s+1][l+1],o=s)):a[s+1][l+1]=0;
return[i,e.slice(o-i+1,o+1)]},i.LCS=function(e,t){var n,r,i=e.length,o=t.length,a=[];
for(n=0;
n<=i;
n++)a.push([0]);
for(r=0;
r<o;
r++)a[0].push(0);
for(n=0;
n<i;
n++)for(r=0;
r<o;
r++)a[n+1][r+1]=e[n]===t[r]?a[n][r]+1:Math.max(a[n+1][r],a[n][r+1]);
return function n(r,i){return r*i==0?"":e[r-1]===t[i-1]?n(r-1,i-1)+e[r-1]:a[r][i-1]>a[r-1][i]?n(r,i-1):n(r-1,i)}(i,o)},i.editDist=function(e,t){if(0===e.length)return t.length;
if(0===t.length)return e.length;
var n,r,i=[];
for(n=0;
n<=e.length;
n++)i[n]=[n];
for(r=0;
r<=t.length;
r++)i[0][r]=r;
for(n=1;
n<=e.length;
n++)for(r=1;
r<=t.length;
r++)e.charAt(n-1)===t.charAt(r-1)?i[n][r]=i[n-1][r-1]:i[n][r]=Math.min(i[n-1][r-1]+1,i[n][r-1]+1,i[n-1][r]+1);
return i[e.length][t.length]},i.fGC=function(e){for(var t=0,n=0;
n<e.length;
++n)"g"!==e.charAt(n)&&"G"!==e.charAt(n)&&"C"!==e.charAt(n)&&"c"!==e.charAt(n)||(t+=1);
return t/e.length},i.cntGC=function(e){for(var t=0,n=0;
n<e.length;
++n)"g"!==e.charAt(n)&&"G"!==e.charAt(n)&&"C"!==e.charAt(n)&&"c"!==e.charAt(n)||(t+=1);
return t},i.randomDNASeq=function(e,t){if(e<0&&(e=100),t&&t.a&&t.c&&t.g&&t.t&&(t.a+t.c+t.g+t.t>1&&(t.t=1-(t.a+t.c+t.g)),t.t<0))throw new Error("Invalid base distribution");
for(var n,r="";
0<length;
)(n=Math.random())<t.a?r+="a":n<t.a+t.c?r+="c":n<t.a+t.c+t.g?r+="g":r+="t";
return r},i.replicateDNASeq=function(e,t){for(var n=[],r=0;
r<t;
++r)n.push(e);
return n},i.cp=function(e){for(var t,n,r=[],i=0;
i<e[0].length;
++i)t=e[0][i],r.push([t]);
for(var o=1;
o<e.length;
){for(var a=[],s=0;
s<r.length;
++s){n=r[s];
for(var u=0;
u<e[o].length;
++u)t=e[o][u],a.push(n.concat([t]))}r=a.slice(),o++}return r},i.expandDNASeq=function(e){for(var t,n=/[^acgt]/gi,r=e.replace(/\s+/g,""),o=[];
null!==(t=n.exec(r));
)o.push(t.index);
for(var a,s=[],u=0,l=0;
l<o.length;
++l)(a=o[l])>u&&s.push([r.slice(u,a)]),s.push(i.DEGENERATES[r[a]].split("")),u=a+1;
u<r.length&&s.push([r.slice(u)]);
for(var c,d=i.cp(s),p=[],f=0;
f<d.length;
++f)c=d[f],p.push(c.join(""));
return p},i.NASeq=function(e,t){this._modelNASeq={},this._modelNASeq.stype=void 0,this._modelNASeq.isDoubleStranded=void 0,this._modelNASeq.topology="linear",this._modelNASeq.sid=void 0,this._modelNASeq.sname=void 0,this._modelNASeq.wseq=void 0,this._modelNASeq.cseq=void 0,this._modelNASeq.length=void 0,this._modelNASeq.sym=void 0,this._modelNASeq.gc_cnt=0,this._modelNASeq.fgc=0,this.setSeq(e),t&&(t.stype&&this.setSeqType(t.stype),t.topology&&this.setSeqTopology(t.topology),t.sid&&this.setSeqId(t.sid),t.sname&&this.setSeqName(t.sname)),Object.defineProperty(this,"stype",{get:function(){return this._modelNASeq.stype},set:function(e){this.setSeqType(e)}}),Object.defineProperty(this,"isDoubleStranded",{get:function(){return this._modelNASeq.isDoubleStranded},set:function(e){this._modelNASeq.isDoubleStranded=!!e}}),Object.defineProperty(this,"sym",{get:function(){return this._modelNASeq.sym},set:function(e){this._modelNASeq.sym=!!e}}),Object.defineProperty(this,"topology",{get:function(){return this._modelNASeq.topology},set:function(e){this.setSeqTopology(e)}}),Object.defineProperty(this,"sid",{get:function(){return this._modelNASeq.sid},set:function(e){this.setSeqId(e)}}),Object.defineProperty(this,"sname",{get:function(){return this._modelNASeq.sname},set:function(e){this.setSeqName(e)}}),Object.defineProperty(this,"wseq",{get:function(){return this._modelNASeq.wseq},set:function(e){this._modelNASeq.wseq=e}}),Object.defineProperty(this,"cseq",{get:function(){return this._modelNASeq.cseq},set:function(e){this._modelNASeq.cseq=e}}),Object.defineProperty(this,"length",{get:function(){return this._modelNASeq.length},set:function(e){this._modelNASeq.length=e}}),Object.defineProperty(this,"seq",{get:function(){return this._modelNASeq.wseq},set:function(e){this.setSeq(e)}})},i.NASeq.prototype={setSeq:function(e){if(this._modelNASeq.wseq=i.sanitizeSeq(e).toLowerCase(),!i.isValidNASeq(this._modelNASeq.wseq,!1))throw new Error("Invalid seq");
""===this._modelNASeq.wseq?this._modelNASeq.cseq="":this._modelNASeq.cseq=i.revcomp(this._modelNASeq.wseq),this._modelNASeq.length=this._modelNASeq.wseq.length,this._modelNASeq.sym=this._modelNASeq.wseq===this._modelNASeq.cseq,this._modelNASeq.gc_cnt=0;
for(var t=0;
t<this._modelNASeq.wseq.length;
++t)"g"!==this._modelNASeq.wseq.charAt(t)&&"G"!==this._modelNASeq.wseq.charAt(t)&&"C"!==this._modelNASeq.wseq.charAt(t)&&"c"!==this._modelNASeq.wseq.charAt(t)||(this._modelNASeq.gc_cnt+=1);
return this._modelNASeq.length>0?this._modelNASeq.fgc=this._modelNASeq.gc_cnt/this._modelNASeq.wseq.length:this._modelNASeq.fgc=0,this},setSeqName:function(e){return this._modelNASeq.sname=e,this},setSeqId:function(e){return this._modelNASeq.sid=e,this},setSeqType:function(e){return this._modelNASeq.stype=e,this},setSeqTopology:function(e){return this._modelNASeq.topology=e,this},subSeq:function(e,t){if(e<0&&(e+=this._modelNASeq.wseq.length),t<0&&(t+=this._modelNASeq.wseq.length),e<0||e>=this._modelNASeq.wseq.length||t<=0||this._modelNASeq.wseq.length,e<t)return this._modelNASeq.wseq.slice(e,t);
if("circular"===this._modelNASeq.topology)return this._modelNASeq.wseq.slice(e)+this._modelNASeq.wseq.slice(0,t);
throw new Error("startidx must be < endidx for linear seq")},splice:function(e,t,n){if(n=n||"",arguments.length<2)throw new Error("insufficient arguments");
if(e<0&&(e+=this._modelNASeq.wseq.length),e<0||e>=this._modelNASeq.wseq.length)throw new Error("start index out of range");
return e+t<this.wseq.length?this.setSeq(this._modelNASeq.wseq.slice(0,e)+n+this._modelNASeq.wseq.slice(e+t)):"linear"===this.topology?this.setSeq(this._modelNASeq.wseq.slice(0,e)+n):this.setSeq(this._modelNASeq.wseq.slice(e+t-this._modelNASeq.wseq.length,e)+n),this},replace:function(e,t,n){if(n=n||"",arguments.length<2)throw new Error("insufficient arguments");
var r=t-e+1;
this.splice(e,r,n)},insert:function(e,t){if(t<0||t>=this.wseq.length)throw new Error("start index out of range");
this.setSeq(this._modelNASeq.wseq.slice(0,t+1)+e+this._modelNASeq.wseq.slice(t+1))},delete:function(e,t){if(e<0||e>this._modelNASeq.wseq.length)throw new Error("start index out of range");
if(t&&(t<0||t>this._modelNASeq.wseq.length))throw new Error("end index out of range");
if(t)if(e>t){if("linear"===this.topology)throw new Error("end index smaller than start index");
this.setSeq(this._modelNASeq.wseq.slice(t,e))}else this.setSeq(this._modelNASeq.wseq.slice(0,e)+this._modelNASeq.wseq.slice(t));
else this.setSeq(this._modelNASeq.wseq.slice(0,e))},ligate:function(e){return new i.NASeq(this._modelNASeq.wseq+e.wseq)},shift:function(e){var t;
e>0?(t=this._modelNASeq.wseq.slice(e)+this._modelNASeq.wseq.slice(0,e),this.setSeq(t)):e<0&&(t=this._modelNASeq.wseq.slice(this.wseq.length+e)+this._modelNASeq.wseq.slice(0,this._modelNASeq.wseq.length+e),this.setSeq(t))},toJson:function(){return this._modelNASeq},expand:function(){var e=i.expandDNASeq(this.seq),t=this.stype,n=this.topology;
return e.map((function(e){new i.NASeq(e,{stype:t,topology:n})}))}},void 0!==n?(void 0!==t&&t.exports&&(n=t.exports=o),n.NEB_bioseq=o):(void 0).NEB_bioseq=o,"function"==typeof define&&define.amd&&define("NEB_bioseq",[],(function(){return o}))},{}],14:[function(e,t,n){"use strict";
var r,i={};
(r=i).TmCalc=function(e){this.init(e)},


r.TmCalc.prototype.nnBr={aa:{dh:-9.1,ds:-22.2},tt:{dh:-9.1,ds:-22.2},at:{dh:-8.6,ds:-20.4},ta:{dh:-6,ds:-21.3},ca:{dh:-5.8,ds:-22.7},tg:{dh:-5.8,ds:-22.7},gt:{dh:-6.5,ds:-22.4},ac:{dh:-6.5,ds:-22.4},ct:{dh:-7.8,ds:-21},ag:{dh:-7.8,ds:-21},ga:{dh:-5.6,ds:-22.2},tc:{dh:-5.6,ds:-22.2},cg:{dh:-11.9,ds:-27.2},gc:{dh:-11.1,ds:-24.4},gg:{dh:-11,ds:-19.9},cc:{dh:-11,ds:-19.9}},
r.TmCalc.prototype.nnSa={aa:{dh:-7.9,ds:-22.2},tt:{dh:-7.9,ds:-22.2},at:{dh:-7.2,ds:-20.4},ta:{dh:-7.2,ds:-21.3},ca:{dh:-8.5,ds:-22.7},tg:{dh:-8.5,ds:-22.7},gt:{dh:-8.4,ds:-22.4},ac:{dh:-8.4,ds:-22.4},ct:{dh:-7.8,ds:-21},ag:{dh:-7.8,ds:-21},ga:{dh:-8.2,ds:-22.2},tc:{dh:-8.2,ds:-22.2},cg:{dh:-10.6,ds:-27.2},gc:{dh:-9.8,ds:-24.4},gg:{dh:-8,ds:-19.9},cc:{dh:-8,ds:-19.9}},
r.TmCalc.prototype.nnde={"-a/at":{dh:-.7,ds:-.8},"-a/ct":{dh:4.4,ds:14.9},"-a/gt":{dh:-1.6,ds:-3.6},"-a/tt":{dh:2.9,ds:10.4},"-c/ag":{dh:-2.1,ds:-3.9},"-c/cg":{dh:-.2,ds:-.1},"-c/gg":{dh:-3.9,ds:-11.2},"-c/tg":{dh:-4.4,ds:-13.1},"-g/ac":{dh:-5.9,ds:-16.5},"-g/cc":{dh:-2.6,ds:-7.4},"-g/gc":{dh:-3.2,ds:-10.4},"-g/tc":{dh:-5.2,ds:-15},"-t/aa":{dh:-.5,ds:-1.1},"-t/ca":{dh:4.7,ds:7.7},"-t/ga":{dh:-4.1,ds:-13.1},"-t/ta":{dh:-3.8,ds:-12.6},"a-/ta":{dh:-2.9,ds:-7.6},"a-/tc":{dh:-4.1,ds:-13},"a-/tg":{dh:-4.2,ds:-15},"a-/tt":{dh:-.2,ds:-.5},"aa/-t":{dh:.2,ds:2.3},"aa/t-":{dh:-.5,ds:-1.1},"ac/-g":{dh:-6.3,ds:-17.1},"ac/t-":{dh:4.7,ds:7.7},"ag/-c":{dh:-3.7,ds:-10},"ag/t-":{dh:-4.1,ds:-13.1},"at/-a":{dh:-2.9,ds:-7.6},"at/t-":{dh:-3.8,ds:-12.6},"c-/ga":{dh:-3.7,ds:-10},"c-/gc":{dh:-4,ds:-11.9},"c-/gg":{dh:-3.9,ds:-10.9},"c-/gt":{dh:-4.9,ds:-13.8},"ca/-t":{dh:.6,ds:3.3},"ca/g-":{dh:-5.9,ds:-16.5},"cc/-g":{dh:-4.4,ds:-12.6},"cc/g-":{dh:-2.6,ds:-7.4},"cg/-c":{dh:-4,ds:-11.9},"cg/g-":{dh:-3.2,ds:-10.4},"ct/-a":{dh:-4.1,ds:-13},"ct/g-":{dh:-5.2,ds:-15},"g-/ca":{dh:-6.3,ds:-17.1},"g-/cc":{dh:-4.4,ds:-12.6},"g-/cg":{dh:-5.1,ds:-14},"g-/ct":{dh:-4,ds:-10.9},"ga/-t":{dh:-1.1,ds:-1.6},"ga/c-":{dh:-2.1,ds:-3.9},"gc/-g":{dh:-5.1,ds:-14},"gc/c-":{dh:-.2,ds:-.1},"gg/-c":{dh:-3.9,ds:-10.9},"gg/c-":{dh:-3.9,ds:-11.2},"gt/-a":{dh:-4.2,ds:-15},"gt/c-":{dh:-4.4,ds:-13.1},"t-/aa":{dh:.2,ds:2.3},"t-/ac":{dh:.6,ds:3.3},"t-/ag":{dh:-1.1,ds:-1.6},"t-/at":{dh:-6.9,ds:-20},"ta/-t":{dh:-6.9,ds:-20},"ta/a-":{dh:-.7,ds:-.8},"tc/-g":{dh:-4,ds:-10.9},"tc/a-":{dh:4.4,ds:14.9},"tg/-c":{dh:-4.9,ds:-13.8},"tg/a-":{dh:-1.6,ds:-3.6},"tt/-a":{dh:-.2,ds:-.5},"tt/a-":{dh:2.9,ds:10.4}},
r.TmCalc.prototype.nndhds={"aa/at":{dh:4.7,ds:12.9},"aa/ct":{dh:7.6,ds:20.2},"aa/gt":{dh:3,ds:7.4},"aa/ta":{dh:1.2,ds:1.7},"aa/tc":{dh:-9.1,ds:-24},"aa/tg":{dh:-.6,ds:-2.3},"aa/tt":{dh:-7.6,ds:-21.3},"ac/ag":{dh:-2.9,ds:-9.8},"ac/cg":{dh:-.7,ds:-3.8},"ac/gg":{dh:.5,ds:3.2},"ac/ta":{dh:5.3,ds:14.6},"ac/tc":{dh:0,ds:-4.4},"ac/tg":{dh:-8.4,ds:-22.4},"ac/tt":{dh:.7,ds:.2},"ag/ac":{dh:-.9,ds:-4.2},"ag/cc":{dh:.6,ds:-.6},"ag/gc":{dh:-4,ds:-13.2},"ag/ta":{dh:-.7,ds:-2.3},"ag/tc":{dh:-7.8,ds:-21},"ag/tg":{dh:-3.1,ds:-9.5},"ag/tt":{dh:1,ds:.9},"at/aa":{dh:1.2,ds:1.7},"at/ca":{dh:5.3,ds:14.6},"at/ga":{dh:-.7,ds:-2.3},"at/ta":{dh:-7.2,ds:-20.4},"at/tc":{dh:-1.2,ds:-6.2},"at/tg":{dh:-2.5,ds:-8.3},"at/tt":{dh:-2.7,ds:-10.8},"ca/at":{dh:3.4,ds:8},"ca/ct":{dh:6.1,ds:16.4},"ca/ga":{dh:-.9,ds:-4.2},"ca/gc":{dh:1.9,ds:3.7},"ca/gg":{dh:-.7,ds:-2.3},"ca/gt":{dh:-8.5,ds:-22.7},"ca/tt":{dh:1,ds:.7},"cc/ag":{dh:5.2,ds:14.2},"cc/cg":{dh:3.6,ds:8.9},"cc/ga":{dh:.6,ds:-.6},"cc/gc":{dh:-1.5,ds:-7.2},"cc/gg":{dh:-8,ds:-19.9},"cc/gt":{dh:-.8,ds:-4.5},"cc/tg":{dh:5.2,ds:13.5},"cg/ac":{dh:1.9,ds:3.7},"cg/cc":{dh:-1.5,ds:-7.2},"cg/ga":{dh:-4,ds:-13.2},"cg/gc":{dh:-10.6,ds:-27.2},"cg/gg":{dh:-4.9,ds:-15.3},"cg/gt":{dh:-4.1,ds:-11.7},"cg/tc":{dh:-1.5,ds:-6.1},"ct/aa":{dh:-9.1,ds:-24},"ct/ca":{dh:0,ds:-4.4},"ct/ga":{dh:-7.8,ds:-21},"ct/gc":{dh:-1.5,ds:-6.1},"ct/gg":{dh:-2.8,ds:-8},"ct/gt":{dh:-5,ds:-15.8},"ct/ta":{dh:-1.2,ds:-6.2},"ga/at":{dh:.7,ds:.7},"ga/ca":{dh:-2.9,ds:-9.8},"ga/cc":{dh:5.2,ds:14.2},"ga/cg":{dh:-.6,ds:-1},"ga/ct":{dh:-8.2,ds:-22.2},"ga/gt":{dh:1.6,ds:3.6},"ga/tt":{dh:-1.3,ds:-5.3},"gc/ag":{dh:-.6,ds:-1},"gc/ca":{dh:-.7,ds:-3.8},"gc/cc":{dh:3.6,ds:8.9},"gc/cg":{dh:-9.8,ds:-24.4},"gc/ct":{dh:2.3,ds:5.4},"gc/gg":{dh:-6,ds:-15.8},"gc/tg":{dh:-4.4,ds:-12.3},"gg/ac":{dh:-.7,ds:-2.3},"gg/ca":{dh:.5,ds:3.2},"gg/cc":{dh:-8,ds:-19.9},"gg/cg":{dh:-6,ds:-15.8},"gg/ct":{dh:3.3,ds:10.4},"gg/gc":{dh:-4.9,ds:-15.3},"gg/tc":{dh:-2.8,ds:-8},"gt/aa":{dh:-.6,ds:-2.3},"gt/ca":{dh:-8.4,ds:-22.4},"gt/cc":{dh:5.2,ds:13.5},"gt/cg":{dh:-4.4,ds:-12.3},"gt/ct":{dh:-2.2,ds:-8.4},"gt/ga":{dh:-3.1,ds:-9.5},"gt/ta":{dh:-2.5,ds:-8.3},"ta/aa":{dh:4.7,ds:12.9},"ta/ac":{dh:3.4,ds:8},"ta/ag":{dh:.7,ds:.7},"ta/at":{dh:-7.2,ds:-20.4},"ta/ct":{dh:1.2,ds:.7},"ta/gt":{dh:-.1,ds:-1.7},"ta/tt":{dh:.2,ds:-1.5},"tc/aa":{dh:7.6,ds:20.2},"tc/ac":{dh:6.1,ds:16.4},"tc/ag":{dh:-8.2,ds:-22.2},"tc/at":{dh:1.2,ds:.7},"tc/cg":{dh:2.3,ds:5.4},"tc/gg":{dh:3.3,ds:10.4},"tc/tg":{dh:-2.2,ds:-8.4},"tg/aa":{dh:3,ds:7.4},"tg/ac":{dh:-8.5,ds:-22.7},"tg/ag":{dh:1.6,ds:3.6},"tg/at":{dh:-.1,ds:-1.7},"tg/cc":{dh:-.8,ds:-4.5},"tg/gc":{dh:-4.1,ds:-11.7},"tg/tc":{dh:-5,ds:-15.8},"tt/aa":{dh:-7.6,ds:-21.3},"tt/ac":{dh:1,ds:.7},"tt/ag":{dh:-1.3,ds:-5.3},"tt/at":{dh:.2,ds:-1.5},"tt/ca":{dh:.7,ds:.2},"tt/ga":{dh:1,ds:.9},"tt/ta":{dh:-2.7,ds:-10.8},"ai/tc":{dh:-8.9,ds:-25.5},"ti/ac":{dh:-5.9,ds:-17.4},"ac/ti":{dh:-8.8,ds:-25.4},"tc/ai":{dh:-4.9,ds:-13.9},"ci/gc":{dh:-5.4,ds:-13.7},"gi/cc":{dh:-6.8,ds:-19.1},"cc/gi":{dh:-8.3,ds:-23.8},"gc/ci":{dh:-5,ds:-12.6},"ai/ta":{dh:-8.3,ds:-25},"ti/aa":{dh:-3.4,ds:-11.2},"aa/ti":{dh:-.7,ds:-2.6},"ta/ai":{dh:-1.3,ds:-4.6},"ci/ga":{dh:2.6,ds:8.9},"gi/ca":{dh:-7.8,ds:-21.1},"ca/gi":{dh:-7,ds:-20},"ga/ci":{dh:-7.6,ds:-20.2},"ai/tt":{dh:.49,ds:-.7},"ti/at":{dh:-6.5,ds:-22},"at/ti":{dh:-5.6,ds:-18.7},"tt/ai":{dh:-.8,ds:-4.3},"ci/gt":{dh:-1,ds:-2.4},"gi/ct":{dh:-3.5,ds:-10.6},"ct/gi":{dh:.1,ds:-1},"gt/ci":{dh:-4.3,ds:-12.1},"ai/tg":{dh:-4.9,ds:-15.8},"ti/ag":{dh:-1.9,ds:-8.5},"ag/ti":{dh:.1,ds:-1.8},"tg/ai":{dh:1,ds:1},"ci/gg":{dh:7.1,ds:21.3},"gi/cg":{dh:-1.1,ds:-3.2},"cg/gi":{dh:5.8,ds:16.9},"gg/ci":{dh:-7.6,ds:-22},"ai/ti":{dh:-3.3,ds:-11.9},"ti/ai":{dh:.1,ds:-2.3},"ci/gi":{dh:1.3,ds:3},"gi/ci":{dh:-.5,ds:-1.3}},
r.TmCalc.prototype.nnloop={3:{dh:0,ds:-10.3},4:{dh:0,ds:-11.6},5:{dh:0,ds:-12.9},6:{dh:0,ds:-14.2},7:{dh:0,ds:-14.8},8:{dh:0,ds:-15.5},9:{dh:0,ds:-15.8},10:{dh:0,ds:-15.8},12:{dh:0,ds:-16.8},14:{dh:0,ds:-17.4},16:{dh:0,ds:-18.1},18:{dh:0,ds:-18.7},20:{dh:0,ds:-19},25:{dh:0,ds:-20.3},30:{dh:0,ds:-21.3}},
r.TmCalc.prototype.nnbulge={1:{dh:0,ds:-12.9},2:{dh:0,ds:-9.4},3:{dh:0,ds:-10},4:{dh:0,ds:-10.3},5:{dh:0,ds:-10.6},6:{dh:0,ds:-11.3},7:{dh:0,ds:-11.9},8:{dh:0,ds:-12.6},9:{dh:0,ds:-13.2},10:{dh:0,ds:-13.9},12:{dh:0,ds:-14.5},14:{dh:0,ds:-15.5},16:{dh:0,ds:-16.1},18:{dh:0,ds:-16.8},20:{dh:0,ds:-17.1},25:{dh:0,ds:-28.1},30:{dh:0,ds:-19}},
r.TmCalc.prototype.nntmm={"aa/ta":{dh:-3.1,ds:-7.8},"aa/tc":{dh:-1.6,ds:-4},"aa/tg":{dh:-1.9,ds:-4.4},"ac/ta":{dh:-1.8,ds:-3.8},"ac/tc":{dh:-.1,ds:.5},"ac/tt":{dh:-.9,ds:-1.7},"ag/ta":{dh:-2.5,ds:-5.9},"ag/tg":{dh:-1.1,ds:-2.1},"ag/tt":{dh:-3.2,ds:-8.7},"at/tc":{dh:-2.3,ds:-6.3},"at/tg":{dh:-3.5,ds:-9.4},"at/tt":{dh:-2.4,ds:-6.5},"ca/ga":{dh:-4.3,ds:-10.7},"ca/gc":{dh:-2.6,ds:-5.9},"ca/gg":{dh:-3.9,ds:-9.6},"cc/ga":{dh:-2.7,ds:-6},"cc/gc":{dh:-2.1,ds:-5.1},"cc/gt":{dh:-3.2,ds:-8},"cg/ga":{dh:-6,ds:-15.5},"cg/gg":{dh:-3.8,ds:-9.5},"cg/gt":{dh:-3.8,ds:-9},"ct/gc":{dh:-3.9,ds:-10.6},"ct/gg":{dh:-6.6,ds:-18.7},"ct/gt":{dh:-6.1,ds:-16.9},"ga/ca":{dh:-8,ds:-22.5},"ga/cc":{dh:-5,ds:-13.8},"ga/cg":{dh:-4.3,ds:-11.1},"gc/ca":{dh:-3.2,ds:-7.1},"gc/cc":{dh:-3.9,ds:-10.6},"gc/ct":{dh:-4.9,ds:-13.5},"gg/ca":{dh:-4.6,ds:-11.4},"gg/cg":{dh:-.7,ds:-19.2},"gg/ct":{dh:-5.7,ds:-15.9},"gt/cc":{dh:-3,ds:-7.8},"gt/cg":{dh:-5.9,ds:-16.1},"gt/ct":{dh:-7.4,ds:-21.2},"ta/aa":{dh:-2.5,ds:-6.3},"ta/ac":{dh:-2.3,ds:-5.9},"ta/ag":{dh:-2,ds:-4.7},"tc/aa":{dh:-2.7,ds:-7},"tc/ac":{dh:-.7,ds:-1.3},"tc/at":{dh:-2.5,ds:-6.3},"tg/aa":{dh:-2.4,ds:-5.8},"tg/ag":{dh:-1.1,ds:-2.7},"tg/at":{dh:-3.9,ds:-10.5},"tt/ac":{dh:-.7,ds:-1.2},"tt/ag":{dh:-3.6,ds:-9.8},"tt/at":{dh:-3.2,ds:-8.9},"at/aa":{dh:-3.1,ds:-7.8},"ct/aa":{dh:-1.6,ds:-4},"gt/aa":{dh:-1.9,ds:-4.4},"at/ca":{dh:-1.8,ds:-3.8},"ct/ca":{dh:-.1,ds:.5},"tt/ca":{dh:-.9,ds:-1.7},"at/ga":{dh:-2.5,ds:-5.9},"gt/ga":{dh:-1.1,ds:-2.1},"tt/ga":{dh:-3.2,ds:-8.7},"ct/ta":{dh:-2.3,ds:-6.3},"gt/ta":{dh:-3.5,ds:-9.4},"tt/ta":{dh:-2.4,ds:-6.5},"ag/ac":{dh:-4.3,ds:-10.7},"cg/ac":{dh:-2.6,ds:-5.9},"gg/ac":{dh:-3.9,ds:-9.6},"ag/cc":{dh:-2.7,ds:-6},"cg/cc":{dh:-2.1,ds:-5.1},"tg/cc":{dh:-3.2,ds:-8},"ag/gc":{dh:-6,ds:-15.5},"gg/gc":{dh:-3.8,ds:-9.5},"tg/gc":{dh:-3.8,ds:-9},"cg/tc":{dh:-3.9,ds:-10.6},"gg/tc":{dh:-6.6,ds:-18.7},"tg/tc":{dh:-6.1,ds:-16.9},"ac/ag":{dh:-8,ds:-22.5},"cc/ag":{dh:-5,ds:-13.8},"gc/ag":{dh:-4.3,ds:-11.1},"ac/cg":{dh:-3.2,ds:-7.1},"cc/cg":{dh:-3.9,ds:-10.6},"tc/cg":{dh:-4.9,ds:-13.5},"ac/gg":{dh:-4.6,ds:-11.4},"gc/gg":{dh:-.7,ds:-19.2},"tc/gg":{dh:-5.7,ds:-15.9},"cc/tg":{dh:-3,ds:-7.8},"gc/tg":{dh:-5.9,ds:-16.1},"tc/tg":{dh:-7.4,ds:-21.2},"aa/at":{dh:-2.5,ds:-6.3},"ca/at":{dh:-2.3,ds:-5.9},"ga/at":{dh:-2,ds:-4.7},"aa/ct":{dh:-2.7,ds:-7},"ca/ct":{dh:-.7,ds:-1.3},"ta/ct":{dh:-2.5,ds:-6.3},"aa/gt":{dh:-2.4,ds:-5.8},"ga/gt":{dh:-1.1,ds:-2.7},"ta/gt":{dh:-3.9,ds:-10.5},"ca/tt":{dh:-.7,ds:-1.2},"ga/tt":{dh:-3.6,ds:-9.8},"ta/tt":{dh:-3.2,ds:-8.9}},
r.TmCalc.prototype.R=1.987,
r.TmCalc.prototype.dSBr={aa:-24,tt:-24,at:-23.9,ta:-16.9,ca:-12.9,tg:-12.9,gt:-17.3,ac:-17.3,ct:-20.8,ag:-20.8,ga:-13.5,tc:-13.5,cg:-27.8,gc:-26.7,gg:-26.6,cc:-26.6},
r.TmCalc.prototype.dSSa={aa:-22.2,tt:-22.2,at:-20.4,ta:-21.3,ca:-22.7,tg:-22.7,gt:-22.4,ac:-22.4,ct:-21,ag:-21,ga:-22.2,tc:-22.2,cg:-27.2,gc:-24.4,gg:-19.9,cc:-19.9},
r.TmCalc.prototype.dHBr={aa:-9.1,tt:-9.1,at:-8.6,ta:-6,ca:-5.8,tg:-5.8,gt:-6.5,ac:-6.5,ct:-7.8,ag:-7.8,ga:-5.6,tc:-5.6,cg:-11.9,gc:-11.1,gg:-11,cc:-11},
r.TmCalc.prototype.dHSa={aa:-7.9,tt:-7.9,at:-7.2,ta:-7.2,ca:-8.5,tg:-8.5,gt:-8.4,ac:-8.4,ct:-7.8,ag:-7.8,ga:-8.2,tc:-8.2,cg:-10.6,gc:-9.8,gg:-8,cc:-8},
r.TmCalc.prototype.init=function(e){e?e.seq&&e.compseq?this.setSeq(e.seq,e.compseq):e.seq?this.setSeq(e.seq):(this.wseq="",this.cseq=""):(this.wseq="",this.cseq="",e={}),this.setCt(e.ct||.25),this.setMonosalt(e.monosalt||50),this.setDisalt(e.disalt||0),this.setDMSO(e.dmso||0),this.setMethod(e.method||4),this.pairmap=e.pairmap||""},
r.TmCalc.prototype.saltCorrect=function(){var e,t,n,r;




if(0===this.saltc&&0===this.disaltc)throw{name:"Missing salt",message:"Unable to calculate salt correction because mono and divalent salt are missing."};

this.sc_sch=16.6*Math.log(this.saltc)/Math.LN10,
this.sc_sl=.368*this.wseq.length*Math.log(this.saltc),t=3.92,n=1.42,r=8.31,(e=this.saltc>0?Math.sqrt(this.disaltc)/this.saltc:-1)>=0&&e<.22?
this.sc_ow=1e-5*(4.29*this.fgc-3.95)*Math.log(this.saltc)+94e-7*Math.log(this.saltc)*Math.log(this.saltc):(e>=.22&&e<6&&(t=3.92*(.843-.352*Math.sqrt(this.saltc)*Math.log(this.saltc)),n=1.42*(1.279-.00403*Math.log(this.saltc)-.00803*Math.log(this.saltc)*Math.log(this.saltc)),r=8.31*(.486-.258*Math.log(this.saltc)+.00525*Math.log(this.saltc)*Math.log(this.saltc)*Math.log(this.saltc))),
this.sc_ow=1e-5*(t+-.911*Math.log(this.disaltc)+this.fgc*(6.26+n*Math.log(this.disaltc))+.5/(this.wseq.length-1)*(52.5*Math.log(this.disaltc)-48.2+r*Math.log(this.disaltc)*Math.log(this.disaltc))))},



r.TmCalc.prototype.setMethod=function(e){return this.method=e,this},
r.TmCalc.prototype.setSeq=function(e,t){var n;
for(this.wseq=e.toLowerCase().replace(/\s/g,"").replace(/u/g,"t"),t?this.cseq=t.toLowerCase().replace(/\s/g,""):(this.cseq=this.revcomp(this.wseq,!1),this.pairmap=Array(this.wseq.length+1).join("|")),this.sym=this.wseq===this.cseq,this.gc_cnt=0,this.at_cnt=0,n=0;
n<this.wseq.length;
++n)"g"===this.wseq.charAt(n)||"c"===this.wseq.charAt(n)?this.gc_cnt+=1:"a"!==this.wseq.charAt(n)&&"t"!==this.wseq.charAt(n)||(this.at_cnt+=1);
return this.fgc=this.gc_cnt/(this.at_cnt+this.gc_cnt),this.saltCorrect(),this},


r.TmCalc.prototype.setCt=function(e){return this.ct=e,this.primerc=1e-6*this.ct,this},
r.TmCalc.prototype.setMonosalt=function(e){return this.salt=e,this.saltc=.001*this.salt,this.saltCorrect(),this},
r.TmCalc.prototype.setDisalt=function(e){return this.disalt=e,this.disaltc=.001*this.disalt,this.saltCorrect(),this},
r.TmCalc.prototype.setDMSO=function(e){return this.dmso=e,this},
r.TmCalc.prototype.buildPairMap=function(){var e,t,n=this.wseq.split(""),r=this.cseq.split("").reverse(),i=function(){var e,t="ACGTUNSWMKRYVDHBacgtunswmkryvdhb ",n={};



for(e=0;
e<t.length;
++e)n[t.charAt(e)]="TGCAANSWKMYRBHDVtgcaanswkmyrbhdv ".charAt(e);
return n}();
for(e=0;
e<n.length;
++e)n[e]===i(r[e])?this.pairmap+="|":"-"===n[e]||"-"===r[e]?this.pairmap+="^":this.pairmap+="x";
for(var o=/x{3,}/g;
null!==o.exec(this.pairmap);
);
for(t=this.pairmap.split(""),e=0;
e<t.length-2;
++e)"x"!==t[e]&&"_"!==t[e]||"x"!==t[e+1]&&"_"!==t[e+1]||"x"!==t[e+2]&&"_"!==t[e+2]||(t[e]="_",t[e+1]="_",t[e+2]="_");
for(this.pairmap=t.join("");
-1!==this.pairmap.search(/\^+_+|_+\^+/);
)this.pairmap=this.pairmap.replace(/\^+_+|_+\^+/,(function(e,t,n){n.slice(0,t);
var r=new Array(e.length+1).join("_");
return n.slice(t+e.length),r}));
for(;
-1!==this.pairmap.search(/\^+x|x\^+/);
)this.pairmap=this.pairmap.replace(/\^+x|x\^+/,(function(e,t,n){n.slice(0,t);
var r=new Array(e.length+1).join("_");
return n.slice(t+e.length),r}));
for(;
-1!==this.pairmap.search(/_+[x^]|[x^]_+/);
)this.pairmap=this.pairmap.replace(/_+[x^]|[x^]_+/,(function(e,t,n){n.slice(0,t);
var r=new Array(e.length+1).join("_");
return n.slice(t+e.length),r}))},

r.TmCalc.prototype.revcomp=function e(t){if(e.COMPLEMENTS||(e.COMPLEMENTS=function(e){var t,n="ACGTUNSWMKRYVDHBacgtunswmkryvdhb -",r={};
for(t=0;
t<n.length;
++t)r[n.charAt(t)]="TGCAANSWKMYRBHDVtgcaanswkmyrbhdv -".charAt(t);
return r}()),""===(t=t||""))return"";
for(var n=t.split(""),r=0;
r<n.length;
++r){if(!e.COMPLEMENTS[n[r]])throw"Unknown base: "+n[r];
n[r]=e.COMPLEMENTS[n[r]]}for(var i="",o=n.length-1;
o>=0;
o--)i+=n[o];
return i},

r.TmCalc.prototype.calcTm=function(e,t,n){var r,i,o,a,s,u,l,c=0,d=0,p=0,f=0,h=0,g=0,m=0,v=0,$=0,b=0,y=this.primerc,w=0;
if(!e&&!this.wseq)return{};
if(t&&(!n||""===n))throw{name:"Missing pairmap",message:"All 3 parameters must be present (seq, cseq, pairmap) to calculate a Tm with possible mismatches."};
if(t)this.setSeq(e,t);
else{for(;
"-"===e[0];
)e=e.slice(1);
for(;
"-"===e[e.length-1];
)e=e.slice(0,e.length-1);
this.setSeq(e)}if(o=this.wseq.split(""),a=this.cseq.split("").reverse(),n&&(this.pairmap=n.toLowerCase()),this.pairmap.length!==this.wseq.length)throw{name:"Invalid pairmap or alignment",message:"Pairmap length "+this.pairmap.length+" must be same as aligned seq length "+this.wseq.length};
if(this.cseq.length!==this.wseq.length)throw{name:"Invalid pairmap or alignment",message:"aligned seqs must have same length ("+this.wseq.length+")."};
switch(s=this.pairmap.split(""),this.method){case 1:for(f+=this.sym?-12.4:-10.8,r=0;
r<this.wseq.length-1;
++r)i=this.wseq.slice(r,r+2),d+=this.dSBr[i],p+=this.dHBr[i];
c=(p*=1e3)/(f+d+this.R*Math.log(y))-273.15+this.sc_sch;
break;
case 3:case 4:for(g=this.sym?-1.4:0,f=-5.7,h=200,u=0,l=this.wseq.length-1;
o[u]+o[u+1]==="--"||a[u]+a[u+1]==="--"||"."===s[u];
)++u;
for("-"!==o[u]&&"-"!==a[u]||(i=o[u]+o[u+1]+"/"+a[u]+a[u+1],this.nnde.hasOwnProperty(i)&&(m+=this.nnde[i].ds,v+=this.nnde[i].dh),++u);
o[l-1]+o[l]==="--"||a[l-1]+a[l]==="--"||"."===s[l];
)--l;
for("-"!==o[l]&&"-"!==a[l]||(i=o[l-1]+o[l]+"/"+a[l-1]+a[l],this.nnde.hasOwnProperty(i)&&(m+=this.nnde[i].ds,v+=this.nnde[i].dh),--l),i=a[u+1]+a[u]+"/"+o[u+1]+o[u],this.nntmm.hasOwnProperty(i)&&($+=this.nntmm[i].ds,b+=this.nntmm[i].dh,++u),i=o[l-1]+o[l]+"/"+a[l-1]+a[l],this.nntmm.hasOwnProperty(i)&&($+=this.nntmm[i].ds,b+=this.nntmm[i].dh,--l),"a"!==o[u]&&"t"!==o[u]||(f+=6.9,h+=2200),"a"!==o[l]&&"t"!==o[l]||(f+=6.9,h+=2200),r=u;
r<l;
r++)"|"!==s[r]&&"x"!==s[r]||"|"!==s[r+1]&&"x"!==s[r+1]||(i=o[r]+o[r+1]+"/"+a[r]+a[r+1],this.nndhds.hasOwnProperty(i)&&(d+=this.nndhds[i].ds,p+=this.nndhds[i].dh));
var x,C,S;
w=(c=(1e3*(p+=v+b)+h)/(f+g+(d+=m+$)+this.R*Math.log(y)))-273.15;
for(var A,T,k,D=/[^_]_+[^_]/g,M=/[^=]=+[^=]/g,E=/[^\^]\^+[^\^]/g,O=0;
A=D.exec(this.pairmap);
)T=A.index,x=2*((k=A[0].length)-2),O+=this.nntmm[o[T]+o[T+1]+"/"+a[T]+a[T+1]].ds,O+=this.nntmm[o[T+k-2]+o[T+k-1]+"/"+a[T+k-2]+a[T+k-1]].ds,O+=this.nnloop[""+x].ds,("a"===o[T]&&"t"===a[T]||"t"===o[T]&&"a"===a[T])&&(O+=.5),("a"===o[T+k-1]&&"t"===a[T+k-1]||"t"===o[T+k-1]&&"a"===a[T+k-1])&&(O+=.5);
for(;
A=M.exec(this.pairmap);
){for(T=A.index,x=C=(k=A[0].length)-2,r=0;
r<k;
++r)"-"===o[T+1]&&(x-=1),"-"===a[T+1]&&(C-=1);
O+=this.nntmm[o[T]+o[T+1]+"/"+a[T]+a[T+1]].ds,O+=this.nntmm[o[T+k-2]+o[T+k-1]+"/"+a[T+k-2]+a[T+k-1]].ds,O+=.3*Math.abs(x-C)*1e3/310.15,O+=this.nnloop[""+(x+C)].ds,("a"===o[T]&&"t"===a[T]||"t"===o[T]&&"a"===a[T])&&(O+=.5),("a"===o[T+k-1]&&"t"===a[T+k-1]||"t"===o[T+k-1]&&"a"===a[T+k-1])&&(O+=.5)}for(;
A=E.exec(this.pairmap);
)T=A.index,1==(S=(k=A[0].length)-2)?(O+=this.nnbulge[""+S].ds,d+=this.nndhds[o[T]+o[T+2]+"/"+a[T]+a[T+2]].ds,p+=this.nndhds[o[T]+o[T+2]+"/"+a[T]+a[T+2]].dh):S>1&&(O+=this.nnbulge[""+S].ds),("a"===o[T]&&"t"===a[T]||"t"===o[T]&&"a"===a[T])&&(O+=.5),("a"===o[T+k-1]&&"t"===a[T+k-1]||"t"===o[T+k-1]&&"a"===a[T+k-1])&&(O+=.5);
w=(c=((p*=1e3)+h)/(f+g+(d+=O)+this.R*Math.log(y)))-273.15,3===this.method?c=1/(1/c+this.sc_sl/(p+h)):4===this.method&&(c=1/(1/c+this.sc_ow)),c-=273.15;
break;
case 7:c=81.5+16.6*Math.log(this.saltc)/Math.LN10+.41*this.fgc-675/this.wseq.length;
break;
case 8:c=4*this.gc_cnt+2*this.at_cnt}return c-=.6*this.dmso,{method:this.method,wseq:this.wseq,cseq:this.cseq,rawtm:w,tm:c,dh:p+h,ds:d+f+g,salt:this.saltc,ct:this.primerc,dmso:this.dmso,fgc:this.fgc,len:this.wseq.length}},r.TmCalc.prototype.calcTm_nomm=function(e){if(!(e&&""!==e||this.wseq))return{};
e&&(this.setSeq(e),this.saltCorrect());
var t,n,r=0,i=0,o=0,a=0,s=0,u=0,l=1e-6*this.ct,c=0;
switch(this.method){case 1:for(a+=this.sym?-12.4:-10.8,t=0;
t<this.wseq.length-1;
++t)n=this.wseq.slice(t,t+2),i+=this.dSBr[n],o+=this.dHBr[n];
r=(c=(o*=1e3)/(a+i+this.R*Math.log(l))-273.15)+this.sc_sch;
break;
case 3:case 4:case 5:for(u=this.sym?-1.4:0,"a"!==this.wseq.charAt(0)&&"t"!==this.wseq.charAt(0)||(a+=4.1,s+=2300),"a"!==this.wseq.charAt(this.wseq.length-1)&&"t"!==this.wseq.charAt(this.wseq.length-1)||(a+=4.1,s+=2300),"g"!==this.wseq.charAt(0)&&"c"!==this.wseq.charAt(0)||(a+=-2.8,s+=100),"g"!==this.wseq.charAt(this.wseq.length-1)&&"c"!==this.wseq.charAt(this.wseq.length-1)||(a+=-2.8,s+=100),t=0;
t<this.wseq.length-1;
t++)n=this.wseq.slice(t,t+2),i+=this.dSSa[n],o+=this.dHSa[n];
c=(r=((o*=1e3)+s)/(a+u+i+this.R*Math.log(l)))-273.15,3===this.method?r=1/(1/r+this.sc_sl/(o+s)):4===this.method?r=1/(1/r+this.sc_ow):5===this.method&&(r+=this.sc_sch),r-=273.15;
break;
case 7:r=81.5+16.6*Math.log(this.saltc)/Math.LN10+.41*this.fgc-675/this.wseq.length}return r-=.6*this.dmso,{method:this.method,wseq:this.wseq,rawtm:c,tm:r,dh:o+s,ds:i+a+u,salt:this.saltc,ct:this.primerc,dmso:this.dmso,fgc:this.fgc,len:this.wseq.length}},void 0!==n?(void 0!==t&&t.exports&&(n=t.exports=i),n.NEB_tmelt=i):(void 0).NEB_tmelt=i,"function"==typeof define&&define.amd&&define(i,["NEB_tmelt"],(function(){return i}))},{}],15:[function(e,t,n){"use strict";
t.exports=function(){var e=e||{};
return e.trim=function(e){for(var t=(e=e.replace(/^\s+/,"")).length-1;
t>=0;
t--)if(/\S/.test(e.charAt(t))){e=e.substring(0,t+1);
break}return e},e.revcomp=function(e){var t,n,r=e.split("").reverse();
for(t=0;
t<r.length;
++t){if(-1===(n="ACGTUKMSWRYBDHVNacgtukmswrybdhvn".indexOf(r[t])))throw{name:"InvalidCharacter",message:"A non IUPAC base was encountered"};
r[t]="TGCAAMKWSYRVHDBNtgcaamkwsyrvhdbn".charAt(n)}return r.join("")},e.isValidSeq=function(e,t){var n=" acgtu";
n+=n.toUpperCase();
var r,i,o=" acgtuwsrymkbdhvn";
for(o+=o.toUpperCase(),r=!1===t?n:o,i=0;
i<e.length;
++i)if(-1===r.indexOf(e.charAt(i)))return!1;
return!0},e.nonCanonicalCount=function(e){var t=e.replace(/\s+/,"").split(""),n="wsrymkbdhvn".split("");
return t.reduce((function(e,t){return-1!=n.indexOf(t)?e+1:e}),0)},e.isNumeric=function(e){return!isNaN(e/1)},e.dmsg=function(e){"undefined"!=typeof console&&"function"==typeof console.log&&console.log(e)},e}},{}],16:[function(e,t,n){"use strict";
t.exports=function(e){return{getData:function(t){return t||(t="data/tmcalculatordata.json"),e.get(t).then((function(e){return e.data}))}}}},{}],17:[function(e,t,n){"use strict";
var r=e("../libs/NEB_bioseq.js");
t.exports=function(){return r}},{"../libs/NEB_bioseq.js":13}],18:[function(e,t,n){"use strict";
var r=e("angular").module("tmcApp");
r.factory("modalService",["$http","$uibModal",e("./modalService2")]),r.factory("nebutil",[e("../libs/neb_util")]),r.factory("tmData",["$http",e("./TmData")]),r.factory("neb_bioseq",[e("./bioseq")]),r.factory("tmcalculatorData",["$http","nebutil",e("./tmcalculator")]),r.factory("tmcalc",[e("./tmcalc")])},{"../libs/neb_util":15,"./TmData":16,"./bioseq":17,"./modalService2":19,"./tmcalc":20,"./tmcalculator":21,angular:32}],19:[function(e,t,n){"use strict";
t.exports=function(e,t){var n={backdrop:!0,keyboard:!0,modalFade:!0},r={},i={showModal:function(e,t){return e||(e={}),e.backdrop=!0,this.show(e,t)},show:function(e,i){var o={},a={};
return angular.extend(o,n,e),angular.extend(a,r,i),o.controller||(o.controller=["$scope","$uibModalInstance",function(e,t){e.modalOptions=a,e.modalOptions.close=function(e){t.close("done")},e.modalOptions.ok=function(e){t.close("done")}}]),t.open(o).result}};
return i}},{}],20:[function(e,t,n){"use strict";
var r=e("../libs/NEB_tmelt.js");
t.exports=function(){return new r.TmCalc}},{"../libs/NEB_tmelt.js":14}],21:[function(e,t,n){

